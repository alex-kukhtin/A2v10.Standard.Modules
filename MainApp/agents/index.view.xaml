<Page Title="@[Documents]" xmlns="clr-namespace:A2v10.Xaml;assembly=A2v10.Xaml">
	<Page.Taskpad>
		<Taskpad Collapsible="True">
			<Panel Header="@[Filters]" Collapsible="True" Style="Transparent">
				<Grid Rows="Auto, Auto, Auto" Columns="1*">
					<PeriodPicker Align="Center" Placement="BottomRight" Display="Name" Value="{Bind Parent.Filter.Period}" Label="@[Period]" Description="{Bind Parent.Filter.Period.Name}" />
					<SelectorSimple Url="/operation/operations" Placeholder="@[Operation.AllData]" ShowClear="True" LineClamp="2" Highlight="True" Value="{Bind Parent.Filter.Operation}" Label="@[Operation]" Grid.Row="2" />
					<SelectorSimple Url="/catalog/agents" Placeholder="@[Agent.AllData]" ShowClear="True" LineClamp="2" Highlight="True" Value="{Bind Parent.Filter.Agent}" Label="@[Agent]" Grid.Row="3" />
				</Grid>
			</Panel>
		</Taskpad>
	</Page.Taskpad>
	<Page.CollectionView>
		<CollectionView ItemsSource="{Bind Documents}" RunAt="ServerUrl">
			<CollectionView.Filter>
				<FilterDescription>
					<FilterItem Property="Fragment" />
					<FilterItem Property="Period" DataType="Period" />
					<FilterItem Property="Operation" DataType="Object" />
					<FilterItem Property="Agent" DataType="Object" />
				</FilterDescription>
			</CollectionView.Filter>
		</CollectionView>
	</Page.CollectionView>
	<Grid Height="100%" Rows="Auto, 1*, Auto" Columns="1*">
		<Toolbar>
			<Button Icon="Plus" Command="{BindCmd Open, Url='/document/stockdocuments/edit'}" Content="@[Create]" />
			<Button Icon="Edit" Command="{BindCmd OpenSelected, Url={Bind Operation.Url}, Argument={Bind Parent.ItemsSource}}" />
			<Button Icon="Clear" Command="{BindCmd DbRemoveSelected, Argument={Bind Parent.ItemsSource}}" />
			<Separator />
			<Button Icon="Reload" Command="{BindCmd Reload}" />
			<ToolbarAligner />
			<SearchBox Placeholder="@[Search]" Value="{Bind Parent.Filter.Fragment}" TabIndex="1" Width="20rem" />
		</Toolbar>
		<DataGrid Sort="True" FixedHeader="True" ItemsSource="{Bind Parent.ItemsSource}" DoubleClick="{BindCmd OpenSelected, Url={Bind Operation.Url}, Argument={Bind Parent.ItemsSource}}" Height="100%" Grid.Row="2">
			<DataGridColumn Content="{Bind Id}" Header="@[Id]" Role="Id" />
			<DataGridColumn Content="{Bind Done}" Header="@[Done]" Role="CheckBox" />
			<DataGridColumn Content="{Bind Date, DataType=Date}" Header="@[Date]" Align="Center" Role="Date" />
			<DataGridColumn Content="{Bind Number}" Header="@[Number]" Fit="True" Wrap="NoWrap" />
			<DataGridColumn Content="{Bind Operation.Name}" Header="@[Operation]" SortProperty="Operation" />
			<DataGridColumn Content="{Bind Name}" Header="@[Name]" />
			<DataGridColumn Content="{Bind Sum, DataType=Currency, HideZeros=True, NegativeRed=True}" Header="@[Sum]" Align="Right" Role="Number" />
			<DataGridColumn Content="{Bind Memo}" Header="@[Memo]" LineClamp="2" />
			<DataGridColumn Content="{Bind Agent.Name}" Header="@[Agent]" SortProperty="Agent" />
		</DataGrid>
		<Pager Source="{Bind Parent.Pager}" Grid.Row="3" />
	</Grid>
</Page>