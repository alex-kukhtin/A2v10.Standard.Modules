<Dialog xmlns="clr-namespace:A2v10.Xaml;assembly=A2v10.Xaml" Title="@[Stores.Browse]" Width="85rem" Overflow="True">
	<Dialog.Taskpad>
		<Taskpad Collapsible="True">
			<Panel Header="@[Grouping]" Collapsible="True" Style="Transparent">
				<Toolbar>
					<Button Icon="Plus" Command="{BindCmd Dialog, Action=Edit, Url='/catalog/stores/editfolder', Argument='new'}" Content="@[Create]" />
					<Button Icon="Edit" Command="{BindCmd Dialog, Action=EditSelected, Url='/catalog/stores/editfolder', Argument={Bind Folders}}" />
					<Button Icon="Clear" Command="{BindCmd DbRemoveSelected, Argument={Bind Folders}, Confirm='@[Confirm.Delete.Element]'}" />
					<Separator />
					<Button Icon="Reload" Command="{BindCmd Reload}" />
				</Toolbar>
				<TreeView ItemsSource="{Bind Folders}" FolderSelect="True" AutoSelect="FirstItem" Height="48vh">
					<TreeViewItem ItemsSource="{Bind SubItems}" Icon="{Bind Icon}" Label="{Bind Name}" IsFolder="{Bind HasSubItems}" />
					<TreeView.ContextMenu>
						<DropDownMenu Direction="UpRight">
							<Separator />
						</DropDownMenu>
					</TreeView.ContextMenu>
				</TreeView>
			</Panel>
		</Taskpad>
	</Dialog.Taskpad>
	<Dialog.Buttons>
		<Button Style="Primary" Command="{BindCmd Select, Argument={Bind Parent.ItemsSource}}" Content="@[Select]" />
		<Button Command="{BindCmd Close}" Content="@[Cancel]" />
	</Dialog.Buttons>
	<Dialog.CollectionView>
		<CollectionView ItemsSource="{Bind Folders.Selected('Stores')}" RunAt="Server">
			<CollectionView.Filter>
				<FilterDescription>
					<FilterItem Property="Fragment" />
				</FilterDescription>
			</CollectionView.Filter>
		</CollectionView>
	</Dialog.CollectionView>
	<Grid Rows="Auto, 1*, Auto" Columns="1*">
		<Toolbar>
			<Button Icon="Plus" Command="{BindCmd Dialog, Action=Append, Url='/catalog/stores/edit', Argument={Bind Parent.ItemsSource}}" Content="@[Create]" />
			<Button Icon="Edit" Command="{BindCmd Dialog, Action=EditSelected, Url='/catalog/stores/edit', Argument={Bind Parent.ItemsSource}}" />
			<Separator />
			<Button Icon="Reload" Command="{BindCmd Reload}" />
			<ToolbarAligner />
			<SearchBox Placeholder="@[Search]" Value="{Bind Parent.Filter.Fragment}" TabIndex="1" Width="20rem" />
		</Toolbar>
		<DataGrid Sort="True" FixedHeader="True" ItemsSource="{Bind Parent.ItemsSource}" DoubleClick="{BindCmd Select, Argument={Bind Parent.ItemsSource}}" Height="30rem" Grid.Row="2">
			<DataGridColumn Content="{Bind Id}" Header="@[Id]" Role="Id" />
			<DataGridColumn Content="{Bind Name}" Header="@[Name]" />
			<DataGridColumn Content="{Bind Memo}" Header="@[Memo]" LineClamp="2" />
		</DataGrid>
		<Pager Source="{Bind Parent.Pager}" Grid.Row="3" />
	</Grid>
</Dialog>