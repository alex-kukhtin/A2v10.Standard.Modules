<Page xmlns="clr-namespace:A2v10.Xaml;assembly=A2v10.Xaml" Title="@[Agents]">
	<Page.Taskpad>
		<Taskpad Collapsible="True">
			<Panel Header="@[Filters]" Collapsible="True" Style="Transparent">
				<Grid Rows="Auto" Columns="1*">
					<SelectorSimple Url="/catalog/stores" Placeholder="@[Store.AllData]" ShowClear="True" LineClamp="2" Highlight="True" Value="{Bind Parent.Filter.Store}" Label="@[Store]" />
				</Grid>
			</Panel>
		</Taskpad>
	</Page.Taskpad>
	<Page.CollectionView>
		<CollectionView ItemsSource="{Bind Agents}" RunAt="ServerUrl">
			<CollectionView.Filter>
				<FilterDescription>
					<FilterItem Property="Fragment" />
					<FilterItem Property="Store" DataType="Object" />
				</FilterDescription>
			</CollectionView.Filter>
		</CollectionView>
	</Page.CollectionView>
	<Grid Height="100%" Rows="Auto, 1*, Auto" Columns="1*">
		<Toolbar>
			<Button Icon="Plus" Command="{BindCmd Dialog, Action=Append, Url='/catalog/agents/edit', Argument={Bind Parent.ItemsSource}}" Content="@[Create]" />
			<Button Icon="Edit" Command="{BindCmd Dialog, Action=EditSelected, Url='/catalog/agents/edit', Argument={Bind Parent.ItemsSource}}" />
			<Button Icon="Clear" Command="{BindCmd DbRemoveSelected, Argument={Bind Parent.ItemsSource}, Confirm='@[Confirm.Delete.Element]'}" />
			<Separator />
			<Button Icon="Reload" Command="{BindCmd Reload}" />
			<ToolbarAligner />
			<SearchBox Placeholder="@[Search]" Value="{Bind Parent.Filter.Fragment}" TabIndex="1" Width="20rem" />
		</Toolbar>
		<DataGrid Sort="True" FixedHeader="True" ItemsSource="{Bind Parent.ItemsSource}" DoubleClick="{BindCmd Dialog, Action=EditSelected, Url='/catalog/agents/edit', Argument={Bind Parent.ItemsSource}}" Height="100%" Grid.Row="2">
			<DataGridColumn Content="{Bind Id}" Header="@[Id]" Role="Id" />
			<DataGridColumn Content="{Bind Date, DataType=Date}" Header="@[Date]" Role="Date" />
			<DataGridColumn Content="{Bind Name}" Header="@[Name]" />
			<DataGridColumn Content="{Bind Memo}" Header="@[Memo]" LineClamp="2" />
			<DataGridColumn Content="{Bind Store.Name}" Header="@[Store]" SortProperty="Store" />
		</DataGrid>
		<Pager Source="{Bind Parent.Pager}" Grid.Row="3" />
	</Grid>
</Page>